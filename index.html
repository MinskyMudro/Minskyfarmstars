<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кликер</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background" style="background-image: url('https://i.imgur.com/tKKTdeq.jpeg');"></div>
    <div class="container">
        <div class="clicker-area">
            <button id="click-button">
                <img src="https://i.imgur.com/adVgPC6.jpeg" alt="Кнопка кликера">
            </button>
        </div>
        <div class="coins">
            <p>Монеты: <span id="coin-count">0.00</span></p>
        </div>
        <div class="upgrade-level">
            <p>Уровень: <span id="upgrade-level-display">1</span></p>
        </div>
        <div class="buttons">
            <button id="upgrade-button">УЛУЧШЕНИЯ</button>
            <button id="top-button">ТОП</button>
            <button id="withdraw-button">ВЫВОД</button>
        </div>
    </div>
    <div class="overlay" id="overlay">
        <div class="popup" id="popup">
           <p id="popup-message"></p>
           <button id="close-popup">Закрыть</button>
        </div>
    </div>

    <script>
       const clickButton = document.getElementById('click-button');
         const closePopupButton = document.getElementById('close-popup');
         const overlay = document.getElementById('overlay');

       clickButton.addEventListener('click', () => {
             fetch('/click')
            .then(response => response.text())
            .then(html => {
                 document.body.innerHTML = html;
                 const captchaSubmit = document.getElementById('captcha-submit');
                   if (captchaSubmit) {
                      captchaSubmit.addEventListener('click', () => {
                       const captchaInput = document.getElementById('captcha-input').value;
                         fetch(`/check_captcha?captcha=${captchaInput}`)
                      .then(response => response.text())
                     .then(html => {
                           document.body.innerHTML = html;
                            })
                    });
                 }
            });
        });

    closePopupButton.addEventListener('click', () => {
        overlay.classList.remove('active')
           fetch('/')
                .then(response => response.text())
                .then(html => {
                     document.body.innerHTML = html
           })

    });


    </script>
</body>
</html>